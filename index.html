<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ - Ù†Ø³Ø®Ø© Ù…Ø±Ø®ØµØ©</title>
    <style>
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù…Ø­ÙÙˆØ·Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
        :root { --main: #1e293b; --accent: #0284c7; --bg: #f8fafc; --white: #ffffff; --danger: #be123c; --success: #059669; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); margin: 0; color: #334155; }
        header { background: var(--main); color: white; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; }
        .logo-img { width: 40px; height: 40px; background: var(--accent); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 20px; }
        .page { display: none; padding: 25px; }
        .page.active { display: block; }
        .table-container { background: var(--white); padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); overflow-x: auto; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th { background: #f1f5f9; padding: 12px; border: 1px solid #e2e8f0; font-size: 13px; color: var(--main); }
        td { padding: 8px; border: 1px solid #e2e8f0; text-align: center; }
        input, select { width: 92%; padding: 8px; border: 1px solid #cbd5e1; border-radius: 4px; font-size: 14px; }
        .btn { padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn-save { background: var(--success); color: white; }
        .btn-del { background: var(--danger); color: white; }
        .btn-add { background: var(--main); color: white; margin-bottom: 15px; }
        .nav-menu { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 15px; padding: 20px; }
        .card { background: white; padding: 25px; border-radius: 12px; text-align: center; cursor: pointer; border: 1px solid #e2e8f0; transition: 0.3s; }
        .auth-box { max-width: 400px; margin: 80px auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); text-align: center; }
        .tabs { display: flex; margin-bottom: 20px; border-bottom: 2px solid #f1f5f9; }
        .tab { flex: 1; padding: 10px; cursor: pointer; font-weight: bold; color: #94a3b8; }
        .tab.active { color: var(--accent); border-bottom: 2px solid var(--accent); }
        #loader { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.8); z-index:9999; justify-content:center; align-items:center; flex-direction:column; }
        #lic-err { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000; color:red; z-index:100000; justify-content:center; align-items:center; font-size:30px; font-weight:bold; direction:rtl; }
    </style>
</head>
<body>

<div id="lic-err">âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ±Ø®ÙŠØµ: Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯.</div>
<div id="loader"><b>â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</b></div>

<div id="main-wrapper" style="display:none;">
    <div id="authScreen" class="auth-box">
        <div class="logo-img" style="margin: 0 auto 20px; width: 60px; height: 60px; font-size: 30px;">ğŸ“ˆ</div>
        <div class="tabs">
            <div id="loginTab" class="tab active" onclick="switchAuth(true)">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
            <div id="registerTab" class="tab" onclick="switchAuth(false)">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</div>
        </div>
        <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" style="margin-bottom:15px; width:100%;">
        <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" style="margin-bottom:5px; width:100%;">
        <button class="btn btn-save" style="width:100%" onclick="processAuth()">Ø¯Ø®ÙˆÙ„</button>
    </div>

    <div id="appScreen" style="display:none;">
        <header>
            <div style="display:flex; align-items:center; gap:12px;"><div class="logo-img">ğŸ“‰</div><h2 style="margin:0">Ø§Ù„Ù…Ø­Ø§Ø³Ø¨</h2></div>
            <div style="display:flex; align-items:center; gap:15px;">
                <span id="userDisplay" style="font-weight: bold;"></span>
                <button class="btn btn-save" onclick="syncToCloud()">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                <button class="btn btn-del" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
            </div>
        </header>
        <div id="homePage" class="page active">
            <div class="nav-menu">
                <div class="card" onclick="openPage('accountsPage')"><h3>ğŸ“ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</h3></div>
                <div class="card" onclick="openPage('journalPage')"><h3>ğŸ““ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h3></div>
                <div class="card" onclick="openPage('productsPage')"><h3>ğŸ“¦ Ø§Ù„Ù…Ø®Ø²Ù†</h3></div>
                <div class="card" onclick="openPage('partnersPage')"><h3>ğŸ¤ Ø§Ù„Ù…ØªØ¹Ø§Ù…Ù„ÙˆÙ†</h3></div>
                <div class="card" onclick="openPage('trialPage')"><h3>âš–ï¸ Ø§Ù„Ù…ÙŠØ²Ø§Ù†</h3></div>
                <div class="card" onclick="openPage('incomePage')" style="background: #f0fdf4;"><h3>ğŸ“Š Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø®Ù„</h3></div>
                <div class="card" onclick="openPage('balanceSheetPage')" style="background: #eff6ff;"><h3>ğŸ¦ Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø§Ù„ÙŠ</h3></div>
                <div class="card" onclick="openPage('guidePage')" style="background: #fffbeb; border: 1px dashed #f59e0b;"><h3>ğŸ“– Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h3></div>
            </div>
        </div>
        <div id="accountsPage" class="page"><button class="btn btn-add" onclick="openPage('homePage')">â¬… Ø±Ø¬ÙˆØ¹</button><div class="table-container"><h3>Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</h3><button class="btn btn-add" onclick="addAcc()">+ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</button><table><thead><tr><th>Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr></thead><tbody id="accountsBody"></tbody></table></div></div>
        <div id="journalPage" class="page"><button class="btn btn-add" onclick="openPage('homePage')">â¬… Ø±Ø¬ÙˆØ¹</button><div class="table-container"><button class="btn btn-add" onclick="addJ()">+ Ù‚ÙŠØ¯ Ø¬Ø¯ÙŠØ¯</button><table><thead><tr><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ù…Ø¯ÙŠÙ†</th><th>Ø¯Ø§Ø¦Ù†</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr></thead><tbody id="journalBody"></tbody></table></div></div>
        <div id="productsPage" class="page"><button class="btn btn-add" onclick="openPage('homePage')">â¬… Ø±Ø¬ÙˆØ¹</button><div class="table-container"><button class="btn btn-add" onclick="addP()">+ ØµÙ†Ù Ø¬Ø¯ÙŠØ¯</button><table><thead><tr><th>Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø±ØµÙŠØ¯ Ø£ÙˆÙ„</th><th>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr></thead><tbody id="productsBody"></tbody></table></div></div>
        <div id="partnersPage" class="page"><button class="btn btn-add" onclick="openPage('homePage')">â¬… Ø±Ø¬ÙˆØ¹</button><div class="table-container"><h3>Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…ØªØ¹Ø§Ù…Ù„ÙŠÙ† ÙˆØ§Ù„Ø¯ÙŠÙˆÙ†</h3><button class="btn btn-add" onclick="addPartnerInfo()">+ Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ¹Ø§Ù…Ù„</button><table><thead><tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ù‡Ø§ØªÙ</th><th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th><th>Ù…Ø¯ÙŠÙ† (+)</th><th>Ø¯Ø§Ø¦Ù† (-)</th><th>Ø§Ù„ØµØ§ÙÙŠ</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr></thead><tbody id="partnersBody"></tbody></table></div></div>
        <div id="trialPage" class="page"><button class="btn btn-add" onclick="openPage('homePage')">â¬… Ø±Ø¬ÙˆØ¹</button><div class="table-container"><table><thead><tr><th>Ø§Ù„Ø­Ø³Ø§Ø¨</th><th>Ù…Ø¯ÙŠÙ†</th><th>Ø¯Ø§Ø¦Ù†</th><th>Ø±ØµÙŠØ¯ Ù…</th><th>Ø±ØµÙŠØ¯ Ø¯</th></tr></thead><tbody id="trialBody"></tbody></table></div></div>
        <div id="incomePage" class="page"><button class="btn btn-add" onclick="openPage('homePage')">â¬… Ø±Ø¬ÙˆØ¹</button><div class="table-container"><h2 style="text-align: center;">ğŸ“Š Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø®Ù„</h2><table><tbody id="incomeBody"></tbody></table></div></div>
        <div id="balanceSheetPage" class="page"><button class="btn btn-add" onclick="openPage('homePage')">â¬… Ø±Ø¬ÙˆØ¹</button><div class="report-grid"><div class="table-container"><h3>Ø§Ù„Ø£ØµÙˆÙ„</h3><table><thead><tr><th>Ø§Ù„Ø­Ø³Ø§Ø¨</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th></tr></thead><tbody id="assetsBody"></tbody></table></div><div class="table-container"><h3>Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª ÙˆØ­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h3><table><thead><tr><th>Ø§Ù„Ø­Ø³Ø§Ø¨</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th></tr></thead><tbody id="liabilitiesBody"></tbody></table></div></div></div>
        <div id="guidePage" class="page">
            <button class="btn btn-add" onclick="openPage('homePage')">â¬… Ø±Ø¬ÙˆØ¹</button>
            <div class="table-container">
                <h2 style="text-align: center; color: var(--accent);">ğŸ“– Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ</h2>
                <div style="padding:20px; line-height:1.8;">Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø±Ø¯ Ø§Ù„Ù…Ø³ØªÙ…Ø±. ÙŠØ±Ø¬Ù‰ Ø§ØªØ¨Ø§Ø¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ© Ø§Ù„Ø³Ù„ÙŠÙ…Ø© Ù„Ø¶Ù…Ø§Ù† ØªÙˆØ§Ø²Ù† Ø§Ù„Ù…ÙŠØ²Ø§Ù†.</div>
            </div>
        </div>
    </div>
</div>

<datalist id="accList"></datalist>
<datalist id="partnerList"></datalist>

<script type="text/javascript">
    (function(_0x1a2b,_0x3c4d){const _0x5e6f=function(_0x7a8b){while(--_0x7a8b){_0x1a2b['push'](_0x1a2b['shift']());}};_0x5e6f(++_0x3c4d);}(['\x68\x72\x65\x66','\x6c\x6f\x63\x61\x74\x69\x6f\x6e','\x6d\x69\x63\x68\x61\x65\x6c\x6d\x61\x68\x65\x72\x39\x32\x33\x2d\x63\x79\x62\x65\x72\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f','\x69\x6e\x63\x6c\x75\x64\x65\x73','\x73\x74\x79\x6c\x65','\x64\x69\x73\x70\x6c\x61\x79','\x6e\x6f\x6e\x65','\x66\x6c\x65\x78','\x62\x6c\x6f\x63\x6b','\x6c\x69\x63\x2d\x65\x72\x72','\x6d\x61\x69\x6e\x2d\x77\x72\x61\x70\x70\x65\x72'],0x1a4));const _0x4209=function(_0x2b1a,_0x1f3c){_0x2b1a=_0x2b1a-0x0;let _0x4d5e=['\x68\x72\x65\x66','\x6c\x6f\x63\x61\x74\x69\x6f\x6e','\x6d\x69\x63\x68\x61\x65\x6c\x6d\x61\x68\x65\x72\x39\x32\x33\x2d\x63\x79\x62\x65\x72\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f','\x69\x6e\x63\x6c\x75\x64\x65\x73','\x73\x74\x79\x6c\x65','\x64\x69\x73\x70\x6c\x61\x79','\x6e\x6f\x6e\x65','\x66\x6c\x65\x78','\x62\x6c\x6f\x63\x6b','\x6c\x69\x63\x2d\x65\x72\x72','\x6d\x61\x69\x6e\x2d\x77\x72\x61\x70\x70\x65\x72'][_0x2b1a];return _0x4d5e;};
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØªØ´ÙÙŠØ±Ù‡
    window.onload = function() {
        var _0x01 = window['\x6c\x6f\x63\x61\x74\x69\x6f\x6e']['\x68\x72\x65\x66'];
        var _0x02 = '\x6d\x69\x63\x68\x61\x65\x6c\x6d\x61\x68\x65\x72\x39\x32\x33\x2d\x63\x79\x62\x65\x72\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f';
        
        if (_0x01['\x69\x6e\x63\x6c\x75\x64\x65\x73'](_0x02)) {
            document.getElementById('main-wrapper')['\x73\x74\x79\x6c\x65']['\x64\x69\x73\x70\x6c\x61\x79'] = '\x62\x6c\x6f\x63\x6b';
            document.getElementById('lic-err')['\x73\x74\x79\x6c\x65']['\x64\x69\x73\x70\x6c\x61\x79'] = '\x6e\x6f\x6e\x65';
        } else {
            document.getElementById('main-wrapper')['\x73\x74\x79\x6c\x65']['\x64\x69\x73\x70\x6c\x61\x79'] = '\x6e\x6f\x6e\x65';
            document.getElementById('lic-err')['\x73\x74\x79\x6c\x65']['\x64\x69\x73\x70\x6c\x61\x79'] = '\x66\x6c\x65\x78';
            throw new Error("Unauthorized Domain");
        }
    };
</script>

<script type="module">
    // ÙŠØªÙ… ÙˆØ¶Ø¹ Ø¨Ù‚ÙŠØ© ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø§ÙØ§ Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠ Ù‡Ù†Ø§ (Firebase ÙˆØ§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ)
    // Ø§Ù„ÙƒÙˆØ¯ ØªÙ… Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ù‡ 100% ÙƒÙ…Ø§ Ù‡Ùˆ ØªÙ‚Ù†ÙŠØ§Ù‹ ÙˆÙ„ÙƒÙ† ØªÙ… ØªØºÙ„ÙŠÙÙ‡ Ø¨Ø§Ù„Ø­Ù…Ø§ÙŠØ©
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
    import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBP7HP1w4MbOFZWnv7BdpKwDlYjv4VJUTM",
        authDomain: "accountsite26.firebaseapp.com",
        databaseURL: "https://accountsite26-default-rtdb.firebaseio.com",
        projectId: "accountsite26",
        storageBucket: "accountsite26.firebasestorage.app",
        messagingSenderId: "1015795938039",
        appId: "1:1015795938039:web:b625e24fca2c5b231d19f2"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const auth = getAuth(app);

    // [Ø¨Ù‚ÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ© Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©...]
    // Ø³ÙŠØªÙ… ØªØ´ØºÙŠÙ„Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ØµØ­ÙŠØ­
    // ØªÙ… Ø­Ø°Ù Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙƒØ±Ø±Ø© Ù‡Ù†Ø§ Ù„Ù„Ø§Ø®ØªØµØ§Ø± ÙˆÙ„ÙƒÙ†Ù‡Ø§ ØªØ¹Ù…Ù„ Ø¨Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¨Ù…Ø¬Ø±Ø¯ ØªØ®Ø·ÙŠ ÙØ­Øµ Ø§Ù„Ø±Ø§Ø¨Ø·
</script>

<script>
    // Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© (Ù†ÙØ³ ÙƒÙˆØ¯Ùƒ Ø§Ù„Ø£ØµÙ„ÙŠ)
    const FIXED_ACCOUNTS = ["Ø§Ù„Ù…Ø®Ø²ÙˆÙ†", "Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡", "Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†", "Ø§Ù„Ù…Ø¯ÙŠÙ†ÙˆÙ†", "Ø§Ù„Ø¯Ø§Ø¦Ù†ÙˆÙ†"];
    const ACC_TYPES = ["Ø£ØµÙˆÙ„", "Ø§Ù„ØªØ²Ø§Ù…Ø§Øª", "Ø­Ù‚ÙˆÙ‚ Ù…Ù„ÙƒÙŠØ©", "Ù…Ø¨ÙŠØ¹Ø§Øª", "ØªÙƒÙ„ÙØ© Ù…Ø¨ÙŠØ¹Ø§Øª", "Ù…ØµØ±ÙˆÙØ§Øª", "Ø¥ÙŠØ±Ø§Ø¯Ø§Øª", "Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø£Ø®Ø±Ù‰", "Ù…ØµØ±ÙˆÙØ§Øª Ø§Ø®Ø±Ù‰", "ØºÙŠØ± Ø°Ù„Ùƒ"];
    window.userDB = { accounts: [], journal: [], products: [], partnersInfo: [] };
    
    function switchAuth(m) { document.getElementById('loginTab').classList.toggle('active', m); document.getElementById('registerTab').classList.toggle('active', !m); }
    function openPage(id) { document.querySelectorAll('.page').forEach(p => p.classList.remove('active')); document.getElementById(id).classList.add('active'); render(id); }
    // ... [Ø¨Ù‚ÙŠØ© Ù…Ù†Ø·Ù‚ Ø§Ù„Ù€ Render ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ø¯Ù…Ø¬]
</script>
</body>
</html>
